// Code generated by BobGen sqlite v0.41.1. DO NOT EDIT.
// This file is meant to be re-generated in place and/or deleted at any time.

package factory

import (
	"context"

	"github.com/aarondl/opt/null"
	models "github.com/artefactual-labs/migrate/internal/database/gen/models"
)

type Factory struct {
	baseAipReplicationMods AipReplicationModSlice
	baseAipMods            AipModSlice
	baseErrorMods          ErrorModSlice
	baseEventMods          EventModSlice
}

func New() *Factory {
	return &Factory{}
}

func (f *Factory) NewAipReplication(mods ...AipReplicationMod) *AipReplicationTemplate {
	return f.NewAipReplicationWithContext(context.Background(), mods...)
}

func (f *Factory) NewAipReplicationWithContext(ctx context.Context, mods ...AipReplicationMod) *AipReplicationTemplate {
	o := &AipReplicationTemplate{f: f}

	if f != nil {
		f.baseAipReplicationMods.Apply(ctx, o)
	}

	AipReplicationModSlice(mods).Apply(ctx, o)

	return o
}

func (f *Factory) FromExistingAipReplication(m *models.AipReplication) *AipReplicationTemplate {
	o := &AipReplicationTemplate{f: f, alreadyPersisted: true}

	o.ID = func() int64 { return m.ID }
	o.AipID = func() int64 { return m.AipID }
	o.LocationUUID = func() null.Val[string] { return m.LocationUUID }
	o.ReplicaUUID = func() null.Val[string] { return m.ReplicaUUID }
	o.Status = func() string { return m.Status }
	o.Attempt = func() int64 { return m.Attempt }

	ctx := context.Background()
	if m.R.Aip != nil {
		AipReplicationMods.WithExistingAip(m.R.Aip).Apply(ctx, o)
	}

	return o
}

func (f *Factory) NewAip(mods ...AipMod) *AipTemplate {
	return f.NewAipWithContext(context.Background(), mods...)
}

func (f *Factory) NewAipWithContext(ctx context.Context, mods ...AipMod) *AipTemplate {
	o := &AipTemplate{f: f}

	if f != nil {
		f.baseAipMods.Apply(ctx, o)
	}

	AipModSlice(mods).Apply(ctx, o)

	return o
}

func (f *Factory) FromExistingAip(m *models.Aip) *AipTemplate {
	o := &AipTemplate{f: f, alreadyPersisted: true}

	o.ID = func() int64 { return m.ID }
	o.UUID = func() string { return m.UUID }
	o.Status = func() string { return m.Status }
	o.Found = func() bool { return m.Found }
	o.FixityRun = func() bool { return m.FixityRun }
	o.Moved = func() bool { return m.Moved }
	o.Cleaned = func() bool { return m.Cleaned }
	o.Replicated = func() bool { return m.Replicated }
	o.ReIndexed = func() bool { return m.ReIndexed }
	o.CurrentLocation = func() null.Val[string] { return m.CurrentLocation }
	o.Size = func() null.Val[int64] { return m.Size }
	o.LocationUUID = func() null.Val[string] { return m.LocationUUID }

	ctx := context.Background()
	if len(m.R.AipReplications) > 0 {
		AipMods.AddExistingAipReplications(m.R.AipReplications...).Apply(ctx, o)
	}
	if len(m.R.Errors) > 0 {
		AipMods.AddExistingErrors(m.R.Errors...).Apply(ctx, o)
	}
	if len(m.R.Events) > 0 {
		AipMods.AddExistingEvents(m.R.Events...).Apply(ctx, o)
	}

	return o
}

func (f *Factory) NewError(mods ...ErrorMod) *ErrorTemplate {
	return f.NewErrorWithContext(context.Background(), mods...)
}

func (f *Factory) NewErrorWithContext(ctx context.Context, mods ...ErrorMod) *ErrorTemplate {
	o := &ErrorTemplate{f: f}

	if f != nil {
		f.baseErrorMods.Apply(ctx, o)
	}

	ErrorModSlice(mods).Apply(ctx, o)

	return o
}

func (f *Factory) FromExistingError(m *models.Error) *ErrorTemplate {
	o := &ErrorTemplate{f: f, alreadyPersisted: true}

	o.ID = func() int64 { return m.ID }
	o.AipID = func() int64 { return m.AipID }
	o.MSG = func() string { return m.MSG }
	o.Details = func() null.Val[string] { return m.Details }

	ctx := context.Background()
	if m.R.Aip != nil {
		ErrorMods.WithExistingAip(m.R.Aip).Apply(ctx, o)
	}

	return o
}

func (f *Factory) NewEvent(mods ...EventMod) *EventTemplate {
	return f.NewEventWithContext(context.Background(), mods...)
}

func (f *Factory) NewEventWithContext(ctx context.Context, mods ...EventMod) *EventTemplate {
	o := &EventTemplate{f: f}

	if f != nil {
		f.baseEventMods.Apply(ctx, o)
	}

	EventModSlice(mods).Apply(ctx, o)

	return o
}

func (f *Factory) FromExistingEvent(m *models.Event) *EventTemplate {
	o := &EventTemplate{f: f, alreadyPersisted: true}

	o.ID = func() int64 { return m.ID }
	o.AipID = func() int64 { return m.AipID }
	o.Action = func() string { return m.Action }
	o.TimeStarted = func() string { return m.TimeStarted }
	o.TimeEnded = func() string { return m.TimeEnded }
	o.TotalDuration = func() null.Val[string] { return m.TotalDuration }
	o.TotalDurationNanoseconds = func() null.Val[int64] { return m.TotalDurationNanoseconds }
	o.Details = func() null.Val[string] { return m.Details }

	ctx := context.Background()
	if m.R.Aip != nil {
		EventMods.WithExistingAip(m.R.Aip).Apply(ctx, o)
	}

	return o
}

func (f *Factory) ClearBaseAipReplicationMods() {
	f.baseAipReplicationMods = nil
}

func (f *Factory) AddBaseAipReplicationMod(mods ...AipReplicationMod) {
	f.baseAipReplicationMods = append(f.baseAipReplicationMods, mods...)
}

func (f *Factory) ClearBaseAipMods() {
	f.baseAipMods = nil
}

func (f *Factory) AddBaseAipMod(mods ...AipMod) {
	f.baseAipMods = append(f.baseAipMods, mods...)
}

func (f *Factory) ClearBaseErrorMods() {
	f.baseErrorMods = nil
}

func (f *Factory) AddBaseErrorMod(mods ...ErrorMod) {
	f.baseErrorMods = append(f.baseErrorMods, mods...)
}

func (f *Factory) ClearBaseEventMods() {
	f.baseEventMods = nil
}

func (f *Factory) AddBaseEventMod(mods ...EventMod) {
	f.baseEventMods = append(f.baseEventMods, mods...)
}
